
var mysql = require('mysql');
var utils = {};

utils.connect = function () {        
    var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'CLI1SQLUSR',
        password : 'xxx321',
        database : 'cli1'
    });
    connection.connect(function(err, connection) {
        if (err) {
            console.error('CONNECTION error: ',err);
            throw err;
        }
    });
    return connection;
}

utils.connectAdmin = function () {        
    var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'ADMINSQLUSR',
        password : 'rty654',
        database : 'adminData'
    });
    connection.connect(function(err, connection) {
        if (err) {
            console.error('CONNECTION error: ',err);
            throw err;
        }
    });
    return connection;
}

utils.getAccPar = function (code,callback) {
    var conn = utils.connect();
    var sql = "select ID,SettingValue from AccountSettings where SettingCode='"+code+"'";
    conn.query(sql,callback);
    conn.end();
}

utils.getCliPar = function (code,req,callback) {
    var conn = utils.connectAdmin();
    var sql = "select ID,SettingValue from ClientSettings where ClientID="+req.session.clientID+" and SettingCode='"+code+"'";
    conn.query(sql,callback);
    conn.end();
}

module.exports = utils;